<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Participant Questionnaire</title>
    <style>
        body {
            font-family: 'Verdana', Geneva, Tahoma, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .question {
            margin: 20px 0;
            padding: 10px;
            border-bottom: 1px solid #dddddd;
        }
        .question p {
            font-size: 18px;
        }
        .buttons {
            text-align: center;
        }
        .buttons button {
            font-size: 16px;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .yes-btn:focus, .no-btn:focus {
            outline: none;
        }
        .yes-btn {
            background-color: #000000;
            color: white;
        }
        .no-btn {
            background-color: #000000;
            color: white;
        }
        .yes-btn.pressed, .no-btn.pressed {
            background-color: #3b4fff; 
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="intro-page">
            <h1>Participant Questionnaire</h1>
            <p>We are interested in studying the kinds of attitudes and life experiences people have. The following questionnaire contains questions about attitudes and life experiences. Please answer “yes” or “no” by clicking the appropriate button. When thinking about yourself and your experience, do not count as important those attitudes, feelings, or experiences you might have had only while under the influence of alcohol or other drugs (e.g., marijuana, LSD, cocaine).</p>
            <div class="buttons">
                <button onclick="startQuestionnaire()">Start Questionnaire</button>
            </div>
        </div>
        <div id="questionnaire" style="display: none;">
            <div id="questions-container"></div>
            <div class="buttons">
                <button id="prev-button" onclick="prevPage()" style="display: none;">Previous</button>
                <button id="next-button" onclick="nextPage()">Next</button>
                <button id="submit-button" onclick="generateJSON()" style="display: none;">Submit</button>
            </div>
        </div>
    </div>
    <script src="jatos.js"></script>
    <script>
        const answers = [];
        const questions = [
            "Do you often notice everyday things that others do not?",
            "Do you sometimes feel that insignificant things are especially meaningful?",
            "Do you find yourself becoming distracted by irrelevant stimuli?",
            "Do you ever feel like you are rapidly approaching the height of your intellectual powers?",
            "Do you sometimes notice small details that you have not noticed before that seem important?",
            "Do you sometimes feel like it is important for you to figure something out, but you’re not sure what it is?",
            "Do you ever go through periods where you feel especially religious or mystical?",
            "Do you ever have difficulty telling if you are thrilled, frightened, pained, or anxious?",
            "Do you ever go through periods of heightened awareness?",
            "Do you ever feel the need to make sense of seemingly random situations or occurrences?",
            "Do you sometimes feel like you are finding the missing piece to a puzzle?",
            "Do you sometimes feel that you can hear with a greater clarity?",
            "Do normally trivial observations sometimes take on an ominous significance?",
            "Do you go through periods in which songs sometimes seem to have an important meaning for your life?",
            "Do you sometimes attribute importance to objects which you normally would not?",
            "Do you sometimes feel like you are on the verge of figuring out something really big or important, but you aren’t sure what it is?",
            "Has your sense of taste ever seemed more acute?",
            "Do you ever feel like the mysteries of the universe are revealing themselves to you?",
            "Do you go through periods in which you feel over-stimulated by things or experiences that are normally manageable?",
            "Do you often become fascinated by the little things around you?",
            "Do your senses ever seem extremely strong or clear?",
            "Do you ever feel like a whole world is opening up to you?",
            "Do you ever feel that your boundaries between inner and outer sensations have been removed?",
            "Do you sometimes feel like the world is changing and you are searching for an explanation?",
            "Do you ever perceive an overwhelming significance to things that are usually not significant to you?",
            "Do you ever have a feeling of inexpressible urgency, and you are not sure what to do?",
            "Have you sometimes become interested in people, events, places, or ideas that normally would not make an impression on you?",
            "Do your thoughts and perceptions ever come faster than can be assimilated?",
            "Do you sometimes notice things that you haven’t noticed before that take on special significance?"
        ];

        let currentPage = 0;
        const questionsPerPage = 5;

        function startQuestionnaire() {
            document.getElementById('intro-page').style.display = 'none';
            document.getElementById('questionnaire').style.display = 'block';
            showPage(currentPage);
        }

        function showPage(page) {
            const start = page * questionsPerPage;
            const end = start + questionsPerPage;
            const questionsContainer = document.getElementById('questions-container');
            questionsContainer.innerHTML = '';

            questions.slice(start, end).forEach((question, index) => {
                const questionNumber = start + index + 1;
                questionsContainer.innerHTML += `
                    <div class="question" id="question${questionNumber}">
                        <p>${questionNumber}. ${question}</p>
                        <div class="buttons">
                            <button class="yes-btn" onclick="toggleButton(this); submitAnswer(${questionNumber}, '${question}', 'yes')">Yes</button>
                            <button class="no-btn" onclick="toggleButton(this); submitAnswer(${questionNumber}, '${question}', 'no')">No</button>
                        </div>
                    </div>
                `;
            });

            document.getElementById('prev-button').style.display = page > 0 ? 'inline-block' : 'none';
            document.getElementById('next-button').style.display = end < questions.length ? 'inline-block' : 'none';
            document.getElementById('submit-button').style.display = end >= questions.length ? 'inline-block' : 'none';
        }

        function submitAnswer(questionNumber, questionText, answer) {
            const question = document.getElementById('question' + questionNumber);
            question.style.backgroundColor = answer === 'yes' ? '#a2acff' : '#a2acff';
            const existingAnswerIndex = answers.findIndex(a => a.questionNumber === questionNumber);
            if (existingAnswerIndex >= 0) {
                answers[existingAnswerIndex].answer = answer;
            } else {
                answers.push({ questionNumber, questionText, answer });
            }
        }

        function nextPage() {
            currentPage++;
            showPage(currentPage);
            scrollToTop();
        }

        function prevPage() {
            currentPage--;
            showPage(currentPage);
            scrollToTop();
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleButton(button) {
            var buttons = button.parentElement.getElementsByTagName('button');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('pressed');
            }
            button.classList.add('pressed');
        }

        function generateJSON() {
            const jsonOutput = JSON.stringify(answers, null, 2);
            console.log(jsonOutput);
            jatos.submitResultData(jsonOutput).then(() => {
            jatos.startNextComponent();
                }).catch((error) => {
                console.error("Error submitting data:", error);
                alert("Error submitting data. Please try again.");
                });
        }

    </script>
</body>
</html>
